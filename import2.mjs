import fs from "fs"; const U="https://kwxdkuljhwdbwqvzdgpw.supabase.co",K="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imt3eGRrdWxqaHdkYndxdnpkZ3B3Iiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc3MTI2NjMzNCwiZXhwIjoyMDg2ODQyMzM0fQ.ubb-b68b-CXix1xSS28mXWaC94jzwaX-XTwXXz9mMBw"; function p(c){const l=c.split("\n").filter(x=>x.trim()),h=l[0].split(";");return l.slice(1).map(r=>{const v=r.split(";"),o={};h.forEach((k,i)=>{let x=v[i]||"";o[k]=x===""||x==="NULL"?null:x==="true"?true:x==="false"?false:x});return o})} async function i(f,t){console.log("Importing "+t);const d=p(fs.readFileSync("data-import/"+f,"utf-8"));const r=await fetch(U+"/rest/v1/"+t,{method:"POST",headers:{apikey:K,Authorization:"Bearer "+K,"Content-Type":"application/json",Prefer:"resolution=merge-duplicates"},body:JSON.stringify(d)});console.log(t+": "+(r.ok?"OK":await r.text()))} await i("crm_companies_fixed.csv","crm_companies");await i("crm_contacts_fixed.csv","crm_contacts");await i("crm_activities_fixed.csv","crm_activities");
